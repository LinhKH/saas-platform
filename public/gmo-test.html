<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>GMO Payment Test</title>
  <style>
    body {
      font-family: Arial;
      padding: 40px;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
    }

    input {
      padding: 8px;
      width: 200px;
    }

    pre {
      background: #f5f5f5;
      padding: 10px;
    }
  </style>
</head>

<body>

  <h2>GMO Payment Gateway Test</h2>

  <label>Amount (JPY)</label><br>
  <input type="number" id="amount" value="1000"><br><br>

  <button onclick="pay()">Pay with GMO</button>

  <h3>Response</h3>
  <pre id="result"></pre>

  <script>
    async function pay() {
      const amount = document.getElementById('amount').value;

      const res = await fetch('/api/gmo/payments', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          amount: amount,
          purpose: 'topup'
        })
      });

      const data = await res.json();
      document.getElementById('result').innerText = JSON.stringify(data, null, 2);

      if (data.payment_url) {
        // ðŸ”¥ Redirect sang GMO
        window.location.href = data.payment_url;
      }
    }
  </script>

</body>

</html>